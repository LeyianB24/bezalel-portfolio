@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    /* --- LIGHT MODE: "macOS Inspired" --- */
    /* Soft white background with macOS accent colors */
    
    --background: 0 0% 96%;         /* #F5F5F5 - Soft White */
    --foreground: 0 0% 17%;         /* #2C2C2C - Dark Text */

    --card: 0 0% 100%;              /* Pure White */
    --card-foreground: 0 0% 17%;
 
    --popover: 0 0% 100%;
    --popover-foreground: 0 0% 17%;
 
    /* Primary: macOS Green */
    --primary: 134 65% 47%;         /* #28C840 - macOS Green */
    --primary-foreground: 0 0% 100%; 
 
    /* Secondary: Subtle Gray */
    --secondary: 0 0% 90%;
    --secondary-foreground: 0 0% 17%;
 
    --muted: 0 0% 94%;
    --muted-foreground: 0 0% 45%;
 
    /* Accent: macOS Yellow */
    --accent: 44 100% 59%;          /* #FFBD2E - macOS Yellow */
    --accent-foreground: 0 0% 17%;
 
    /* Destructive: macOS Red */
    --destructive: 4 100% 67%;      /* #FF5F57 - macOS Red */
    --destructive-foreground: 0 0% 100%;

    --border: 0 0% 88%;
    --input: 0 0% 88%;
    --ring: 134 65% 47%;            /* Focus ring matches Primary */
 
    --radius: 0.75rem;
    
    /* macOS Accent Colors */
    --macos-green: 134 65% 47%;     /* #28C840 */
    --macos-yellow: 44 100% 59%;    /* #FFBD2E */
    --macos-red: 4 100% 67%;        /* #FF5F57 */
  }
 
  .dark {
    /* --- DARK MODE: "macOS Dark" --- */
    /* Deep charcoal background with macOS accent colors */

    --background: 0 0% 12%;         /* #1E1E1E - Deep Charcoal */
    --foreground: 0 0% 91%;         /* #E8E8E8 - Light Text */

    --card: 0 0% 15%;
    --card-foreground: 0 0% 91%;
 
    --popover: 0 0% 15%;
    --popover-foreground: 0 0% 91%;
 
    /* Primary: macOS Green (brighter in dark mode) */
    --primary: 134 65% 52%;         /* Slightly brighter #28C840 */
    --primary-foreground: 0 0% 12%;
 
    /* Secondary: Dark Gray */
    --secondary: 0 0% 20%;
    --secondary-foreground: 0 0% 91%;
 
    --muted: 0 0% 20%;
    --muted-foreground: 0 0% 64%;
 
    --accent: 44 100% 59%;          /* macOS Yellow */
    --accent-foreground: 0 0% 12%;
 
    --destructive: 4 100% 67%;      /* macOS Red */
    --destructive-foreground: 0 0% 91%;
 
    --border: 0 0% 25%;
    --input: 0 0% 25%;
    --ring: 134 65% 52%;
    
    /* macOS Accent Colors (same in both modes) */
    --macos-green: 134 65% 52%;
    --macos-yellow: 44 100% 59%;
    --macos-red: 4 100% 67%;
  }
}

@layer base {
  * {
    @apply border-border;
    transition: background-color 0.3s ease, color 0.3s ease, border-color 0.3s ease;
  }
  
  body {
    @apply bg-background text-foreground antialiased;
    /* Optical sizing for precise engineering text */
    font-feature-settings: "rlig" 1, "calt" 1, "ss01" 1, "zero" 1; /* "zero" gives slashed zeros for code */
  }

  /* --- BRANDED TEXT SELECTION --- */
  /* macOS Green highlight */
  ::selection {
    background-color: hsl(var(--macos-green) / 0.3);
    color: hsl(var(--macos-green));
  }
  
  /* --- VIEW TRANSITIONS API --- */
  /* Enables native smooth morphing between pages */
  ::view-transition-old(root),
  ::view-transition-new(root) {
    animation-duration: 0.3s;
  }
}

@layer utilities {
  /* --- 1. HD GLASSMORPHISM SUITE --- */
  
  /* HD Glass - Premium blur effect */
  .glass-hd {
    background: rgba(255, 255, 255, 0.7);
    -webkit-backdrop-filter: blur(12px);
    backdrop-filter: blur(12px);
    border: 1px solid rgba(255, 255, 255, 0.18);
    box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.1);
  }
  
  .dark .glass-hd {
    background: rgba(30, 30, 30, 0.75);
    border: 1px solid rgba(255, 255, 255, 0.1);
    box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.37);
  }
  
  /* Glass Card - For content cards */
  .glass-card {
    background: rgba(255, 255, 255, 0.8);
    -webkit-backdrop-filter: blur(12px);
    backdrop-filter: blur(12px);
    border: 1px solid rgba(255, 255, 255, 0.25);
    box-shadow: 0 4px 30px rgba(0, 0, 0, 0.08);
  }
  
  .dark .glass-card {
    background: rgba(38, 38, 38, 0.8);
    border: 1px solid rgba(255, 255, 255, 0.12);
    box-shadow: 0 4px 30px rgba(0, 0, 0, 0.4);
  }
  
  /* Glass Panel - For navigation/sidebars */
  .glass-panel {
    background: rgba(255, 255, 255, 0.85);
    -webkit-backdrop-filter: blur(12px);
    backdrop-filter: blur(12px);
    border: 1px solid rgba(255, 255, 255, 0.3);
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.06);
  }
  
  .dark .glass-panel {
    background: rgba(48, 48, 48, 0.85);
    border: 1px solid rgba(255, 255, 255, 0.15);
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.5);
  }
  
  /* Ultra Glass - Advanced blur with saturation */
  .glass-ultra {
    background: rgba(255, 255, 255, 0.05);
    -webkit-backdrop-filter: blur(20px) saturate(180%);
    backdrop-filter: blur(20px) saturate(180%);
    border: 1px solid rgba(255, 255, 255, 0.1);
    box-shadow: 
      0 8px 32px 0 rgba(0, 0, 0, 0.2),
      inset 0 1px 0 0 rgba(255, 255, 255, 0.1);
  }
  
  .dark .glass-ultra {
    background: rgba(30, 30, 30, 0.4);
    border: 1px solid rgba(255, 255, 255, 0.08);
    box-shadow: 
      0 8px 32px 0 rgba(0, 0, 0, 0.4),
      inset 0 1px 0 0 rgba(255, 255, 255, 0.05);
  }
  
  /* Glass Reflection Effect */
  .glass-reflection {
    position: relative;
  }
  
  .glass-reflection::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 30%;
    background: linear-gradient(180deg, 
      rgba(255, 255, 255, 0.15) 0%, 
      transparent 100%);
    pointer-events: none;
    border-radius: inherit;
  }

  /* Holographic Glass (Reflective Edges with macOS green) */
  .glass-holographic {
    background: linear-gradient(135deg, rgba(255, 255, 255, 0.1), rgba(255, 255, 255, 0.05));
    backdrop-filter: blur(12px);
    -webkit-backdrop-filter: blur(12px);
    border-top: 1px solid rgba(40, 200, 64, 0.2);
    border-left: 1px solid rgba(40, 200, 64, 0.2);
    box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.15), inset 0 1px 0 0 rgba(255, 255, 255, 0.1);
    position: relative;
    overflow: hidden;
  }
  
  .dark .glass-holographic {
    background: linear-gradient(135deg, rgba(40, 200, 64, 0.05), rgba(0, 0, 0, 0.2));
    border-top: 1px solid rgba(40, 200, 64, 0.3);
    border-left: 1px solid rgba(40, 200, 64, 0.3);
    box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.4), inset 0 1px 0 0 rgba(40, 200, 64, 0.1);
  }

  /* --- 2. TEXT GLOW (macOS Green) --- */
  .text-glow {
    text-shadow: 0 0 20px hsl(var(--macos-green) / 0.6); 
  }
  
  .text-glow-subtle {
    text-shadow: 0 0 10px hsl(var(--macos-green) / 0.3);
  }
  
  .text-glow-white {
    text-shadow: 0 0 15px rgba(255, 255, 255, 0.6);
  }
  
  .text-glow-yellow {
    text-shadow: 0 0 20px hsl(var(--macos-yellow) / 0.6);
  }
  
  .text-glow-red {
    text-shadow: 0 0 20px hsl(var(--macos-red) / 0.6);
  }

  /* --- 3. SCANLINE TEXTURE (HUD Effect) --- */
  /* Adds a very subtle TV-line effect to backgrounds */
  .scanlines {
    background: linear-gradient(
      to bottom,
      rgba(255,255,255,0),
      rgba(255,255,255,0) 50%,
      rgba(0,0,0,0.2) 50%,
      rgba(0,0,0,0.2)
    );
    background-size: 100% 4px;
    pointer-events: none;
  }

  /* --- 4. TEXT BALANCE --- */
  .text-balance {
    text-wrap: balance;
  }
  
  /* --- 5. HIDE SCROLLBAR --- */
  .scrollbar-hide::-webkit-scrollbar {
      display: none;
  }
  .scrollbar-hide {
      -ms-overflow-style: none;
      scrollbar-width: none;
  }
}

/* --- 6. GLOBAL SCROLLBAR POLISH --- */
/* Sleek, thin, and matches the theme */
::-webkit-scrollbar {
  width: 6px;
  height: 6px;
}

::-webkit-scrollbar-track {
  background: transparent;
}

::-webkit-scrollbar-thumb {
  background: hsl(var(--muted));
  border-radius: 9999px;
  border: 1px solid hsl(var(--border));
}

::-webkit-scrollbar-thumb:hover {
  background: hsl(var(--macos-green)); /* macOS Green on hover */
}

/* --- 7. LENIS SMOOTH SCROLL CONFIG --- */
html.lenis, html.lenis body {
  height: auto;
}

.lenis.lenis-smooth {
  scroll-behavior: auto !important;
}

.lenis.lenis-smooth [data-lenis-prevent] {
  overscroll-behavior: contain;
}

.lenis.lenis-stopped {
  overflow: hidden;
}

.lenis.lenis-scrolling iframe {
  pointer-events: none;
}